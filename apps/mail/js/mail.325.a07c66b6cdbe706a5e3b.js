/*! For license information please see mail.325.a07c66b6cdbe706a5e3b.js.LICENSE.txt */
(self.webpackChunknextcloud_mail=self.webpackChunknextcloud_mail||[]).push([[325],{90162:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});const i=new(a(20144).ZP)},72488:(t,e,a)=>{"use strict";a.d(e,{I:()=>o});var i=a(31352);const o=t=>{if(t.specialUse.length>0)try{return(t=>{if(t.specialUse.includes("all"))return(0,i.Iu)("mail","All");if(t.specialUse.includes("archive"))return(0,i.Iu)("mail","Archive");if(t.specialUse.includes("drafts"))return(0,i.Iu)("mail","Drafts");if(t.specialUse.includes("flagged"))return(0,i.Iu)("mail","Favorites");if(t.specialUse.includes("inbox"))return t.isPriorityInbox?(0,i.Iu)("mail","Priority inbox"):t.isUnified?(0,i.Iu)("mail","All inboxes"):(0,i.Iu)("mail","Inbox");if(t.specialUse.includes("junk"))return(0,i.Iu)("mail","Junk");if(t.specialUse.includes("sent"))return(0,i.Iu)("mail","Sent");if(t.specialUse.includes("trash"))return(0,i.Iu)("mail","Trash");throw new Error("unknown special use ".concat(t.specialUse))})(t)}catch(t){console.error("could not translate special mailbox",t)}return t.displayName}},47360:(t,e,a)=>{"use strict";function i(t,e){if(!t.myAcls)return!0;const a=[...t.myAcls];for(const t of[...e])if(!a.includes(t))return!1;return!0}a.d(e,{Y:()=>i})},58721:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var i=a(87537),o=a.n(i),n=a(23645),s=a.n(n)()(o());s.push([t.id,"p.app-settings span.loading-icon[data-v-14fc9ab2]{display:inline-block;vertical-align:middle;padding:5px 0}p.app-settings[data-v-14fc9ab2]{padding:10px 0}.app-settings-button[data-v-14fc9ab2]{display:inline-flex;background-position:10px center;text-align:left;margin-top:6px;width:100%}.app-settings-button.button.primary.new-button[data-v-14fc9ab2]{color:var(--color-primary-element-text);padding-left:34px;gap:4px;width:fit-content}.app-settings-link[data-v-14fc9ab2]{text-decoration:underline}[data-v-14fc9ab2] .button-vue__text{text-overflow:clip;white-space:normal}[data-v-14fc9ab2] .button-vue__wrapper{justify-content:flex-start}.mailvelope-section[data-v-14fc9ab2]{padding-top:15px}.mailvelope-section a.button[data-v-14fc9ab2]{display:flex;align-items:center;line-height:normal;min-height:44px;font-size:unset}.mailvelope-section a.button[data-v-14fc9ab2]:focus-visible,.mailvelope-section a.button[data-v-14fc9ab2]:hover{box-shadow:0 0 0 1px var(--color-primary-element)}.material-design-icon.lock-icon[data-v-14fc9ab2]{margin-right:10px}.section-title[data-v-14fc9ab2]{margin-top:20px;margin-bottom:10px}.sorting[data-v-14fc9ab2]{display:flex;width:100%}.sorting__switch[data-v-14fc9ab2]{width:50%}","",{version:3,sources:["webpack://./src/components/AppSettingsMenu.vue"],names:[],mappings:"AACA,kDACC,oBAAA,CACA,qBAAA,CACA,aAAA,CAED,gCACC,cAAA,CAED,sCACC,mBAAA,CACA,+BAAA,CACA,eAAA,CACA,cAAA,CACA,UAAA,CAED,gEACC,uCAAA,CAEA,iBAAA,CACA,OAAA,CACA,iBAAA,CAED,oCACC,yBAAA,CAED,oCACC,kBAAA,CACA,kBAAA,CAED,uCACC,0BAAA,CAED,qCACC,gBAAA,CAEA,8CACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,eAAA,CACA,eAAA,CAEA,gHAEC,iDAAA,CAKF,iDACC,iBAAA,CAIF,gCACC,eAAA,CACA,kBAAA,CAED,0BACC,YAAA,CACA,UAAA,CACA,kCACC,SAAA",sourcesContent:["\np.app-settings span.loading-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 5px 0;\n}\np.app-settings {\n\tpadding: 10px 0;\n}\n.app-settings-button {\n\tdisplay: inline-flex;\n\tbackground-position: 10px center;\n\ttext-align: left;\n\tmargin-top: 6px;\n\twidth: 100%;\n}\n.app-settings-button.button.primary.new-button {\n\tcolor: var(--color-primary-element-text);\n\t//this style will be removed after we migrate also the  'add mail account' to material design\n\tpadding-left: 34px;\n\tgap: 4px;\n\twidth: fit-content;\n}\n.app-settings-link {\n\ttext-decoration: underline;\n}\n::v-deep .button-vue__text {\n\ttext-overflow: clip;\n\twhite-space: normal;\n}\n::v-deep .button-vue__wrapper {\n\tjustify-content: flex-start;\n}\n.mailvelope-section {\n\tpadding-top: 15px;\n\n\ta.button {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tline-height: normal;\n\t\tmin-height: 44px;\n\t\tfont-size: unset;\n\n\t\t&:focus-visible,\n\t\t&:hover {\n\t\t\tbox-shadow: 0 0 0 1px var(--color-primary-element);\n\t\t}\n\t}\n}\n.material-design-icon {\n\t&.lock-icon {\n\t\tmargin-right: 10px;\n\t}\n\n}\n.section-title {\n\tmargin-top: 20px;\n\tmargin-bottom: 10px;\n}\n.sorting {\n\tdisplay: flex;\n\twidth: 100%;\n\t&__switch{\n\t\twidth: 50%;\n\t}\n}\n"],sourceRoot:""}]);const r=s},85724:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var i=a(87537),o=a.n(i),n=a(23645),s=a.n(n)()(o());s.push([t.id,"[data-v-13bd6344] .modal-container{width:calc(100vw - 120px) !important;height:calc(100vh - 120px) !important;max-width:600px !important;max-height:500px !important}.modal-content[data-v-13bd6344]{display:flex;box-sizing:border-box;width:100%;height:100%;flex-direction:column;padding:15px}.crumbs[data-v-13bd6344]{display:inline-flex;padding-right:0px;flex-wrap:wrap}.crumbs .level[data-v-13bd6344]{display:inline-flex;height:44px;min-width:0px;flex:0 0 auto;order:1;padding-right:7px;background-position:right center;background-size:auto 24px;margin-top:-10px}.crumbs a[data-v-13bd6344]{position:relative;padding:12px;opacity:.5;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:0 0 auto;min-width:0px;max-width:200px}.crumbs a[data-v-13bd6344]:hover{opacity:.7}.crumbs a.icon-home[data-v-13bd6344]{width:0px;background-position:left center}.mailbox-list[data-v-13bd6344]{display:inline-block;width:100%;height:100%;overflow-y:auto;flex:1}.mailbox-list li[data-v-13bd6344]{display:flex;cursor:pointer}.mailbox-list li[data-v-13bd6344]:hover{background-color:var(--color-background-hover)}.mailbox-list li[data-v-13bd6344]:not(:last-child){border-bottom:1px solid var(--color-border)}.mailbox-list h2[data-v-13bd6344]{width:100%;color:var(--color-text-maxcontrast);text-align:center;margin-top:80px;opacity:.4;background-size:64px;height:64px}.mailbox-list .mailbox-icon[data-v-13bd6344]{width:24px;height:24px;padding:14px;opacity:.9;background-size:24px}.mailbox-list .mailbox-title[data-v-13bd6344]{padding:14px 14px 14px 0;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.buttons[data-v-13bd6344]{display:flex;justify-content:flex-end;padding-top:10px}.buttons .spinner[data-v-13bd6344]{margin-right:5px}.material-design-icon[data-v-13bd6344]{opacity:.7;margin-right:6px}","",{version:3,sources:["webpack://./src/components/MailboxPicker.vue"],names:[],mappings:"AACA,mCACC,oCAAA,CACA,qCAAA,CACA,0BAAA,CACA,2BAAA,CAGD,gCACC,YAAA,CACA,qBAAA,CACA,UAAA,CACA,WAAA,CACA,qBAAA,CACA,YAAA,CAGD,yBACC,mBAAA,CACA,iBAAA,CACA,cAAA,CAEA,gCACC,mBAAA,CACA,WAAA,CACA,aAAA,CACA,aAAA,CACA,OAAA,CACA,iBAAA,CACA,gCAAA,CACA,yBAAA,CACA,gBAAA,CAGD,2BACC,iBAAA,CACA,YAAA,CACA,UAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,aAAA,CACA,aAAA,CACA,eAAA,CAEA,iCACC,UAAA,CAIF,qCACC,SAAA,CACA,+BAAA,CAIF,+BACC,oBAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,MAAA,CAEA,kCACC,YAAA,CACA,cAAA,CAEA,wCACC,8CAAA,CAGD,mDACC,2CAAA,CAIF,kCACC,UAAA,CACA,mCAAA,CACA,iBAAA,CACA,eAAA,CACA,UAAA,CACA,oBAAA,CACA,WAAA,CAGD,6CACC,UAAA,CACA,WAAA,CACA,YAAA,CACA,UAAA,CACA,oBAAA,CAGD,8CACC,wBAAA,CACA,MAAA,CACA,eAAA,CACA,kBAAA,CACA,sBAAA,CAIF,0BACC,YAAA,CACA,wBAAA,CACA,gBAAA,CAEA,mCACC,gBAAA,CAGF,uCACC,UAAA,CACA,gBAAA",sourcesContent:["\n:deep(.modal-container) {\n\twidth: calc(100vw - 120px) !important;\n\theight: calc(100vh - 120px) !important;\n\tmax-width: 600px !important;\n\tmax-height: 500px !important;\n}\n\n.modal-content {\n\tdisplay: flex;\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\tflex-direction: column;\n\tpadding: 15px;\n}\n\n.crumbs {\n\tdisplay: inline-flex;\n\tpadding-right: 0px;\n\tflex-wrap: wrap;\n\n\t.level {\n\t\tdisplay: inline-flex;\n\t\theight: 44px;\n\t\tmin-width: 0px;\n\t\tflex: 0 0 auto;\n\t\torder: 1;\n\t\tpadding-right: 7px;\n\t\tbackground-position: right center;\n\t\tbackground-size: auto 24px;\n\t\tmargin-top: -10px;\n\t}\n\n\ta {\n\t\tposition: relative;\n\t\tpadding: 12px;\n\t\topacity: 0.5;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\tflex: 0 0 auto;\n\t\tmin-width: 0px;\n\t\tmax-width: 200px;\n\n\t\t&:hover {\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n\n\ta.icon-home {\n\t\twidth: 0px;\n\t\tbackground-position: left center;\n\t}\n}\n\n.mailbox-list {\n\tdisplay: inline-block;\n\twidth: 100%;\n\theight: 100%;\n\toverflow-y: auto;\n\tflex: 1;\n\n\tli {\n\t\tdisplay: flex;\n\t\tcursor: pointer;\n\n\t\t&:hover {\n\t\t\tbackground-color: var(--color-background-hover);\n\t\t}\n\n\t\t&:not(:last-child) {\n\t\t\tborder-bottom: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\th2 {\n\t\twidth: 100%;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\ttext-align: center;\n\t\tmargin-top: 80px;\n\t\topacity: 0.4;\n\t\tbackground-size: 64px;\n\t\theight: 64px;\n\t}\n\n\t.mailbox-icon {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tpadding: 14px;\n\t\topacity: 0.9;\n\t\tbackground-size: 24px;\n\t}\n\n\t.mailbox-title {\n\t\tpadding: 14px 14px 14px 0;\n\t\tflex: 1;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t}\n}\n\n.buttons {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tpadding-top: 10px;\n\n\t.spinner {\n\t\tmargin-right: 5px;\n\t}\n}\n.material-design-icon {\n\topacity: .7;\n\tmargin-right: 6px;\n}\n"],sourceRoot:""}]);const r=s},16921:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var i=a(87537),o=a.n(i),n=a(23645),s=a.n(n)()(o());s.push([t.id,".button[data-v-cfbd4ee8]{width:44px;height:44px;background-color:var(--color-main-background);border:none;display:inline-block;position:absolute;margin-left:254px;margin-top:13px;opacity:.7}.button[data-v-cfbd4ee8]:hover,.button[data-v-cfbd4ee8]:focus{opacity:1;background-color:var(--color-background-hover)}.button[data-v-cfbd4ee8]:disabled{cursor:not-allowed;opacity:.5;animation:rotation-cfbd4ee8 2s linear}[data-v-cfbd4ee8] .app-navigation-new button{width:240px !important;height:44px}@keyframes rotation-cfbd4ee8{from{transform:rotate(0deg)}to{transform:rotate(-360deg)}}.app-navigation-spacer[data-v-cfbd4ee8]{order:0 !important}[data-v-cfbd4ee8] .settings-button{font-weight:bold !important;z-index:1}.outbox[data-v-cfbd4ee8]{margin-left:6px;width:auto}.outbox__border[data-v-cfbd4ee8]{border-top:1px solid var(--color-background-darker)}.outbox[data-v-cfbd4ee8] .app-navigation-entry.active{background-color:rgba(0,0,0,0) !important}","",{version:3,sources:["webpack://./src/components/Navigation.vue"],names:[],mappings:"AACA,yBACC,UAAA,CACA,WAAA,CACA,6CAAA,CACA,WAAA,CACA,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,UAAA,CACA,8DAEC,SAAA,CACA,8CAAA,CAED,kCACC,kBAAA,CACA,UAAA,CACA,qCAAA,CAGF,6CACC,sBAAA,CACA,WAAA,CAED,6BACA,KACC,sBAAA,CAED,GACE,yBAAA,CAAA,CAGF,wCACC,kBAAA,CAED,mCACC,2BAAA,CACA,SAAA,CAED,yBACC,eAAA,CACA,UAAA,CACA,iCACC,mDAAA,CAGA,sDACC,yCAAA",sourcesContent:["\n.button {\n\twidth: 44px;\n\theight: 44px;\n\tbackground-color: var(--color-main-background);\n\tborder: none;\n\tdisplay: inline-block;\n\tposition: absolute;\n\tmargin-left: 254px;\n\tmargin-top: 13px;\n\topacity: .7;\n\t&:hover,\n\t&:focus {\n\t\topacity: 1;\n\t\tbackground-color:var(--color-background-hover);\n\t}\n\t&:disabled {\n\t\tcursor: not-allowed;\n\t\topacity: .5;\n\t\tanimation: rotation 2s linear;\n\t}\n}\n:deep(.app-navigation-new button) {\n\twidth: 240px !important;\n\theight: 44px;\n}\n@keyframes rotation {\nfrom {\n\ttransform: rotate(-0deg);\n}\nto {\n\t\ttransform: rotate(-360deg);\n\t}\n}\n.app-navigation-spacer {\n\torder: 0 !important;\n}\n:deep(.settings-button) {\n\tfont-weight: bold !important;\n\tz-index: 1;\n}\n.outbox {\n\tmargin-left: 6px;\n\twidth: auto;\n\t&__border {\n\t\tborder-top: 1px solid var(--color-background-darker);\n\t}\n\t:deep(.app-navigation-entry) {\n\t\t&.active {\n\t\t\tbackground-color: transparent !important;\n\t\t}\n\t}\n}\n\n"],sourceRoot:""}]);const r=s},29934:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var i=a(87537),o=a.n(i),n=a(23645),s=a.n(n)()(o());s.push([t.id,"[data-v-31b1e9fa] .app-navigation-entry__title{color:var(--color-text-maxcontrast)}","",{version:3,sources:["webpack://./src/components/NavigationAccountExpandCollapse.vue"],names:[],mappings:"AACA,+CACC,mCAAA",sourcesContent:["\n:deep(.app-navigation-entry__title) {\n\tcolor: var(--color-text-maxcontrast);\n}\n"],sourceRoot:""}]);const r=s},71481:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var i=a(87537),o=a.n(i),n=a(23645),s=a.n(n)()(o());s.push([t.id,".counter-bubble__counter[data-v-3b571186]{max-width:initial}","",{version:3,sources:["webpack://./src/components/NavigationMailbox.vue"],names:[],mappings:"AACA,0CACC,iBAAA",sourcesContent:["\n.counter-bubble__counter {\n\tmax-width: initial;\n}\n"],sourceRoot:""}]);const r=s},51100:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var i=a(87537),o=a.n(i),n=a(23645),s=a.n(n)()(o());s.push([t.id,".navigation-outbox__unread-counter[data-v-701039d4]{margin-right:calc(var(--default-grid-baseline)*2)}.outbox-opacity-icon[data-v-701039d4]{opacity:.7}.outbox-opacity-icon[data-v-701039d4]:hover{opacity:1}","",{version:3,sources:["webpack://./src/components/NavigationOutbox.vue"],names:[],mappings:"AAEC,oDACC,iDAAA,CAIF,sCACC,UAAA,CACA,4CACC,SAAA",sourcesContent:["\n.navigation-outbox {\n\t&__unread-counter {\n\t\tmargin-right: calc(var(--default-grid-baseline)*2);\n\t}\n}\n\n.outbox-opacity-icon {\n\topacity: .7;\n\t&:hover {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]);const r=s},49826:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var i=a(87537),o=a.n(i),n=a(23645),s=a.n(n)()(o());s.push([t.id,".header[data-v-680c6c25]{display:flex;align-items:center;justify-content:space-between;padding:calc(var(--default-grid-baseline, 4px)*2);gap:4px;height:61px}.refresh__button[data-v-680c6c25]{background-color:rgba(0,0,0,0)}.new-message-button[data-v-680c6c25]{background-image:var(--gradient-primary-background)}","",{version:3,sources:["webpack://./src/components/NewMessageButtonHeader.vue"],names:[],mappings:"AACA,yBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,iDAAA,CACA,OAAA,CACA,WAAA,CAED,kCACC,8BAAA,CAED,qCACC,mDAAA",sourcesContent:["\n.header {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: calc(var(--default-grid-baseline, 4px) * 2);\n\tgap: 4px;\n\theight: 61px;\n}\n.refresh__button {\n\tbackground-color: transparent;\n}\n.new-message-button {\n\tbackground-image: var(--gradient-primary-background);\n}\n"],sourceRoot:""}]);const r=s},4117:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var i=a(87537),o=a.n(i),n=a(23645),s=a.n(n)()(o());s.push([t.id,".certificate-modal[data-v-2caf23ca]{padding:20px}.certificate-modal__list table[data-v-2caf23ca]{width:100%}.certificate-modal__list table th[data-v-2caf23ca]{color:var(--color-text-maxcontrast)}.certificate-modal__list table th[data-v-2caf23ca],.certificate-modal__list table td[data-v-2caf23ca]{padding:2.5px}.certificate-modal__list table tr[data-v-2caf23ca]:hover{background-color:unset}.certificate-modal__list__actions[data-v-2caf23ca]{margin:12px;float:right}.certificate-modal__import[data-v-2caf23ca]{display:flex;flex-direction:column;gap:10px}.certificate-modal__import input[type=file][data-v-2caf23ca]{display:flex;width:100%}.certificate-modal__import__type[data-v-2caf23ca]{display:flex;gap:0 20px;flex-wrap:wrap}.certificate-modal__import__type>div[data-v-2caf23ca]{display:flex;gap:5px;align-items:center}.certificate-modal__import__hints[data-v-2caf23ca]{color:var(--color-text-maxcontrast)}.certificate-modal__import__actions[data-v-2caf23ca]{display:flex;justify-content:space-between;gap:15px}","",{version:3,sources:["webpack://./src/components/smime/SmimeCertificateModal.vue"],names:[],mappings:"AACA,oCACC,YAAA,CAGC,gDACC,UAAA,CAEA,mDACC,mCAAA,CAGD,sGACC,aAAA,CAID,yDACC,sBAAA,CAIF,mDACC,WAAA,CACA,WAAA,CAIF,4CACC,YAAA,CACA,qBAAA,CACA,QAAA,CAEA,6DACC,YAAA,CACA,UAAA,CAGD,kDACC,YAAA,CACA,UAAA,CACA,cAAA,CAEA,sDACC,YAAA,CACA,OAAA,CACA,kBAAA,CAIF,mDACC,mCAAA,CAGD,qDACC,YAAA,CACA,6BAAA,CACA,QAAA",sourcesContent:["\n.certificate-modal {\n\tpadding: 20px;\n\n\t&__list {\n\t\ttable {\n\t\t\twidth: 100%;\n\n\t\t\tth {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\n\t\t\tth, td {\n\t\t\t\tpadding: 2.5px;\n\t\t\t}\n\n\t\t\t// Disable default hover style\n\t\t\ttr:hover {\n\t\t\t\tbackground-color: unset;\n\t\t\t}\n\t\t}\n\n\t\t&__actions {\n\t\t\tmargin: 12px;\n\t\t\tfloat: right;\n\t\t}\n\t}\n\n\t&__import {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 10px;\n\n\t\tinput[type=file] {\n\t\t\tdisplay: flex;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t&__type {\n\t\t\tdisplay: flex;\n\t\t\tgap: 0 20px;\n\t\t\tflex-wrap: wrap;\n\n\t\t\t> div {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: 5px;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t}\n\n\t\t&__hints {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\n\t\t&__actions {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\tgap: 15px;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const r=s},41004:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var i=a(87537),o=a.n(i),n=a(23645),s=a.n(n)()(o());s.push([t.id,"[data-v-17eaba5f] .modal-wrapper .modal-container{display:block;overflow:scroll;transition:transform 300ms ease;border-radius:var(--border-radius-large);box-shadow:0 0 40px rgba(0,0,0,.2);padding:30px 40px 20px}dt[data-v-17eaba5f]{width:auto;text-align:left}","",{version:3,sources:["webpack://./src/views/KeyboardShortcuts.vue"],names:[],mappings:"AACA,kDACC,aAAA,CACA,eAAA,CACA,+BAAA,CACA,wCAAA,CACA,kCAAA,CACA,sBAAA,CAED,oBACC,UAAA,CACA,eAAA",sourcesContent:["\n:deep(.modal-wrapper .modal-container) {\n\tdisplay: block;\n\toverflow: scroll;\n\ttransition: transform 300ms ease;\n\tborder-radius: var(--border-radius-large);\n\tbox-shadow: 0 0 40px rgba(0,0,0,0.2);\n\tpadding: 30px 40px 20px;\n}\ndt {\n\twidth: auto;\n\ttext-align: left;\n}\n\n"],sourceRoot:""}]);const r=s},25880:(t,e,a)=>{"use strict";a.d(e,{Z:()=>B});var i=a(15961),o=a(3139),n=a(54670),s=a(77531),r=a(56855),l=a(25552),c=a(76188),d=a(81170),u=a(31352),p=a(72488),m=a(47360);const A={name:"MailboxPicker",components:{ButtonVue:i.P2,Modal:i.Jc,IconInbox:n.Z,IconDraft:s.default,IconSent:r.Z,IconArchive:l.Z,IconTrash:c.Z,IconFolder:d.default,IconBreadcrumb:o.default,IconLoading:i.lb},props:{account:{type:Object,required:!0},selected:{type:Number,required:!1,default:void 0},loading:{type:Boolean,required:!1,default:!1},labelSelect:{type:String,default:(0,u.Iu)("mail","Choose")},labelSelectLoading:{type:String,default:(0,u.Iu)("mail","Choose")},pickedMailbox:{type:Object,required:!1,default:()=>{}},allowRoot:{type:Boolean,default:!1}},data:()=>({selectedMailboxId:void 0,mailboxCrumbs:[]}),computed:{mailboxes(){return this.selectedMailboxId?this.$store.getters.getSubMailboxes(this.selectedMailboxId):this.$store.getters.getMailboxes(this.account.accountId)},filteredMailboxes(){return this.pickedMailbox?this.mailboxes.filter((t=>t.databaseId!==this.pickedMailbox.databaseId&&(0,m.Y)(t,"k"))):this.mailboxes.filter((t=>(0,m.Y)(t,"i")))}},methods:{getMailboxIcon:t=>t.specialRole?"icon-"+t.specialRole:"icon-folder",getMailboxTitle:t=>(0,p.I)(t),onClickHome(){this.selectedMailboxId=void 0,this.$emit("update:selected",void 0),this.mailboxCrumbs=[]},onClickCrumb(t){this.selectedMailboxId=this.mailboxCrumbs[t].databaseId,this.$emit("update:selected",this.selectedMailboxId),this.mailboxCrumbs=this.mailboxCrumbs.slice(0,t+1)},onClickMailbox(t){this.selectedMailboxId=t.databaseId,this.$emit("update:selected",this.selectedMailboxId),this.mailboxCrumbs.push(t)},onSelect(){this.$emit("select",this.selectedMailboxId)},onClose(){this.$emit("close")}}};var b=a(93379),h=a.n(b),g=a(7795),x=a.n(g),v=a(90569),f=a.n(v),C=a(3565),_=a.n(C),y=a(19216),I=a.n(y),w=a(44589),k=a.n(w),S=a(85724),M={};M.styleTagTransform=k(),M.setAttributes=_(),M.insert=f().bind(null,"head"),M.domAPI=x(),M.insertStyleElement=I(),h()(S.Z,M),S.Z&&S.Z.locals&&S.Z.locals;const B=(0,a(51900).Z)(A,(function(){var t=this,e=t._self._c;return e("Modal",{on:{close:t.onClose}},[e("div",{ref:"content",staticClass:"modal-content"},[e("h2",{staticClass:"oc-dialog-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Choose target mailbox"))+"\n\t\t")]),t._v(" "),e("span",{staticClass:"crumbs"},[e("div",{on:{click:function(e){return e.preventDefault(),t.onClickHome.apply(null,arguments)}}},[e("IconInbox",{attrs:{size:20}})],1),t._v(" "),t._l(t.mailboxCrumbs,(function(a,i){return e("div",{key:a.databaseId,staticClass:"level"},[e("IconBreadcrumb",{attrs:{size:20}}),t._v(" "),e("a",{on:{click:function(e){return e.preventDefault(),t.onClickCrumb(i)}}},[t._v("\n\t\t\t\t\t"+t._s(t.getMailboxTitle(a))+"\n\t\t\t\t")])],1)}))],2),t._v(" "),e("div",{staticClass:"mailbox-list"},[t.filteredMailboxes.length>0?e("ul",t._l(t.filteredMailboxes,(function(a){return e("li",{key:a.databaseId,on:{click:function(e){return e.preventDefault(),t.onClickMailbox(a)}}},["inbox"===a.specialRole?e("IconInbox",{attrs:{size:20}}):"drafts"===a.specialRole?e("IconDraft",{attrs:{size:20}}):"sent"===a.specialRole?e("IconSent",{attrs:{size:20}}):"archive"===a.specialRole?e("IconArchive",{attrs:{size:20}}):"trash"===a.specialRole?e("IconTrash",{attrs:{size:20}}):e("IconFolder",{attrs:{size:20}}),t._v(" "),e("div",{staticClass:"mailbox-title"},[t._v("\n\t\t\t\t\t\t"+t._s(t.getMailboxTitle(a))+"\n\t\t\t\t\t")])],1)})),0):e("IconFolder",{attrs:{size:65}}),t._v(" "),e("div",{staticClass:"empty-icon empty"}),t._v(" "),e("h2",[t._v(t._s(t.t("mail","No more submailboxes in here")))])],1),t._v(" "),e("div",{staticClass:"buttons"},[e("ButtonVue",{attrs:{type:"primary",disabled:t.loading||!t.allowRoot&&!t.selectedMailboxId,"aria-label":t.loading?t.labelSelectLoading:t.labelSelect},on:{click:t.onSelect},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:20}}):t._e()]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.loading?t.labelSelectLoading:t.labelSelect)+"\n\t\t\t")])],1)])])}),[],!1,null,"13bd6344",null).exports},34854:(e,a,i)=>{"use strict";i.d(a,{Z:()=>Wt});var o=i(15961),n=i(49944),s=i(3378),r=i(79753),l=i(2568),c=i.n(l),d=i(12085),u=i.n(d),p=i(89177),m=i(71093),A=i(60054),b=i(46703),h=i(81170),g=i(98318),x=i(52386),v=i(76188),f=i(84320),C=i(89595);const _={name:"NavigationAccount",components:{AppNavigationItem:o.tn,ActionButton:o.Js,ActionCheckbox:o.Bt,ActionInput:o.Iw,ActionText:o.L1,AccountSettings:()=>Promise.all([i.e(633),i.e(909),i.e(589),i.e(744),i.e(594),i.e(113)]).then(i.bind(i,40693)),IconInfo:A.Z,IconSettings:b.default,IconFolderAdd:h.default,MenuDown:g.default,MenuUp:x.default,IconDelete:v.Z,IconError:f.Z,IconBullet:C.Z,IconLoading:o.lb},props:{account:{type:Object,required:!0},firstMailbox:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},data:()=>({menuOpen:!1,loading:{delete:!1},savingShowOnlySubscribed:!1,quota:void 0,editing:!1,showSaving:!1,showSettings:!1,createMailboxName:""}),computed:{visible(){return!0!==this.account.isUnified&&!1!==this.account.visible},firstMailboxRoute(){return this.firstMailbox&&!this.isDisabled?{name:"mailbox",params:{mailboxId:this.firstMailbox.databaseId}}:""},id(){return"account-"+this.account.id},bulletColor(){return this.account.error?void 0:(t=>{const e=c()(t),a=u().hex.hsl(e),i=[40*Math.round(a[0]/40),a[1],a[2]];return"#"+u().hsl.hex(i)})(this.account.emailAddress)},quotaText(){return void 0===this.quota?t("mail","Loading …"):!1===this.quota?t("mail","Not supported by the server"):t("mail","{usage} of {limit} used",{usage:(0,s.s)(this.quota.usage),limit:(0,s.s)(this.quota.limit)})}},methods:{createMailbox(t){this.editing=!0;const e=this.createMailboxName;p.Z.info("creating mailbox "+e),this.menuOpen=!1,this.$store.dispatch("createMailbox",{account:this.account,name:e}).then((()=>p.Z.info("mailbox ".concat(e," created")))).catch((t=>{throw p.Z.error("could not create mailbox",{error:t}),t})),this.editing=!1,this.showSaving=!1},openCreateMailbox(){this.editing=!0,this.showSaving=!1},removeAccount(){const e=this.account.id;p.Z.info("delete account",{account:this.account});const a=t("mail","The account for {email} and cached email data will be removed from Nextcloud, but not from your email provider.",{email:this.account.emailAddress});OC.dialogs.confirmDestructive(a,t("mail","Remove account {email}",{email:this.account.emailAddress}),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Remove {email}",{email:this.account.emailAddress}),confirmClasses:"error",cancel:t("mail","Cancel")},(t=>{if(t)return this.$store.dispatch("deleteAccount",this.account).then((()=>{this.loading.delete=!0})).then((()=>{p.Z.info("account ".concat(e," deleted, redirecting …")),location.href=(0,r.generateUrl)("/apps/mail")})).catch((t=>p.Z.error("could not delete account",{error:t})));this.loading.delete=!1}))},changeAccountOrderUp(){this.$store.dispatch("moveAccount",{account:this.account,up:!0}).catch((t=>p.Z.error("could not move account up",{error:t})))},changeAccountOrderDown(){this.$store.dispatch("moveAccount",{account:this.account}).catch((t=>p.Z.error("could not move account down",{error:t})))},changeShowSubscribedOnly(t){this.savingShowOnlySubscribed=!0,this.$store.dispatch("patchAccount",{account:this.account,data:{showSubscribedOnly:t}}).then((()=>{this.savingShowOnlySubscribed=!1,p.Z.info("show only subscribed mailboxes updated to "+t)})).catch((t=>{throw p.Z.error("could not update subscription mode",{error:t}),this.savingShowOnlySubscribed=!1,t}))},onMenuToggle(t){t&&(console.debug("accounts menu opened, fetching quota"),this.fetchQuota())},async fetchQuota(){const t=await(0,m.q9)(this.account.id);console.debug("quota fetched",{quota:t}),this.quota=void 0!==t&&t},toggleAccountSettings(){this.showSettings=!this.showSettings},showAccountSettings(){this.showSettings=!0}}};var y=i(51900);const I=(0,y.Z)(_,(function(){var t=this,e=t._self._c;return t.visible?e("AppNavigationItem",{key:t.id,attrs:{id:t.id,"menu-open":t.menuOpen,title:t.account.emailAddress,to:t.firstMailboxRoute,exact:!0},on:{"update:menuOpen":[function(e){t.menuOpen=e},t.onMenuToggle],"update:menu-open":function(e){t.menuOpen=e}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.account.error||t.isDisabled?e("IconError",{attrs:{size:20}}):t.bulletColor?e("IconBullet",{attrs:{size:16,"fill-color":t.bulletColor}}):t._e()]},proxy:!0},{key:"actions",fn:function(){return[t.isDisabled?[e("ActionText",{attrs:{title:t.t("mail","Provisioned account is disabled")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}],null,!1,3812223437)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Please login using a password to enable this account. The current session is using passwordless authentication, e.g. SSO or WebAuthn."))+"\n\t\t\t")])]:[t.account.isUnified?t._e():e("ActionText",{attrs:{title:t.t("mail","Quota")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}],null,!1,3812223437)},[t._v("\n\t\t\t\t"+t._s(t.quotaText)+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.showAccountSettings,shortkey:t.toggleAccountSettings},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconSettings",{attrs:{size:20}})]},proxy:!0}],null,!1,408832678)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Account settings"))+"\n\t\t\t")]),t._v(" "),e("ActionCheckbox",{attrs:{checked:t.account.showSubscribedOnly,disabled:t.savingShowOnlySubscribed},on:{"update:checked":t.changeShowSubscribedOnly}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Show only subscribed mailboxes"))+"\n\t\t\t")]),t._v(" "),t.editing?t._e():e("ActionButton",{on:{click:t.openCreateMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add mailbox"))+"\n\t\t\t")]),t._v(" "),t.editing?e("ActionInput",{attrs:{value:t.createMailboxName},on:{"update:value":function(e){t.createMailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.createMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Mailbox name"))+"\n\t\t\t")]):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:20}})]},proxy:!0}],null,!1,3081367109)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Saving"))+"\n\t\t\t")]):t._e(),t._v(" "),t.isFirst?t._e():e("ActionButton",{on:{click:t.changeAccountOrderUp},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MenuUp",{attrs:{size:20}})]},proxy:!0}],null,!1,859424094)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Move up"))+"\n\t\t\t")]),t._v(" "),t.isLast?t._e():e("ActionButton",{on:{click:t.changeAccountOrderDown},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MenuDown",{attrs:{size:20}})]},proxy:!0}],null,!1,3657048169)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Move down"))+"\n\t\t\t")]),t._v(" "),t.account.provisioningId?t._e():e("ActionButton",{on:{click:t.removeAccount},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Remove account"))+"\n\t\t\t")])]]},proxy:!0},{key:"extra",fn:function(){return[e("AccountSettings",{attrs:{open:t.showSettings,account:t.account},on:{"update:open":t.toggleAccountSettings}})]},proxy:!0}],null,!1,1916006566)}):t._e()}),[],!1,null,null,null).exports,w={name:"NavigationAccountExpandCollapse",components:{AppNavigationItem:o.tn},props:{account:{type:Object,required:!0}},computed:{id(){return"collapse-"+this.account.id},title(){return this.account.collapsed&&this.account.showSubscribedOnly?t("mail","Show all subscribed mailboxes"):this.account.collapsed&&!this.account.showSubscribedOnly?t("mail","Show all mailboxes"):t("mail","Collapse mailboxes")}},methods:{async toggleCollapse(){p.Z.debug("toggling collapsed mailboxes for account "+this.account.id);try{await this.$store.commit("toggleAccountCollapsed",this.account.id),await this.$store.dispatch("setAccountSetting",{accountId:this.account.id,key:"collapsed",value:this.account.collapsed})}catch(t){p.Z.error("could not update account settings",{error:t})}}}};var k=i(93379),S=i.n(k),M=i(7795),B=i.n(M),Z=i(90569),D=i.n(Z),T=i(3565),E=i.n(T),P=i(19216),N=i.n(P),O=i(44589),$=i.n(O),z=i(29934),U={};U.styleTagTransform=$(),U.setAttributes=E(),U.insert=D().bind(null,"head"),U.domAPI=B(),U.insertStyleElement=N(),S()(z.Z,U),z.Z&&z.Z.locals&&z.Z.locals;const R=(0,y.Z)(w,(function(){var t=this;return(0,t._self._c)("AppNavigationItem",{attrs:{title:t.title},on:{click:t.toggleCollapse}})}),[],!1,null,"31b1e9fa",null).exports;var F=i(54558),L=i(40657),K=i(7805),Y=i(41743),q=i(58613),V=i(30250),j=i(42831),G=i(77531),H=i(25552),J=i(54670),W=i(32758),Q=i(82613),X=i(35369),tt=i(99893),et=i(56855);const at={name:"MoveMailboxModal",components:{MailboxPicker:i(25880).Z},props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0}},data:()=>({moving:!1,destMailboxId:void 0}),methods:{onClose(){this.$emit("close")},async onMove(){if(this.moving=!0,this.mailbox.id!==this.destMailboxId)try{if(this.destMailboxId){const t=this.$store.getters.getMailbox(this.destMailboxId).name+this.mailbox.delimiter+this.mailbox.name;await this.$store.dispatch("renameMailbox",{account:this.account,mailbox:this.mailbox,newName:t})}else{const t=this.mailbox.displayName;await this.$store.dispatch("renameMailbox",{account:this.account,mailbox:this.mailbox,newName:t})}}catch(t){p.Z.error("could not move mailbox",{error:t})}finally{this.moving=!1,this.$emit("close")}},genId:t=>"mailbox-"+t.databaseId}},it=(0,y.Z)(at,(function(){var t=this;return(0,t._self._c)("MailboxPicker",{attrs:{account:t.account,selected:t.destMailboxId,loading:t.moving,"picked-mailbox":t.mailbox,"allow-root":!0,"label-select":t.t("mail","Move"),"label-select-loading":t.t("mail","Moving")},on:{"update:selected":function(e){t.destMailboxId=e},select:t.onMove,close:t.onClose}})}),[],!1,null,null,null).exports;var ot=i(98238),nt=i(47360),st=i(64648),rt=i(4956),lt=i(31352),ct=i(72488),dt=i(64024),ut=i(9486),pt=i(90162);class mt{constructor(t,e,a){this.el=t,this.options=a,this.registerListeners.bind(this)(t),this.setInitialAttributes()}setInitialAttributes(){this.draggableInfo={},this.setStatus("enabled")}update(t,e){this.setInitialAttributes(),this.options=e.options}registerListeners(t){pt.Z.$on("drag-start",this.onDragStart.bind(this)),pt.Z.$on("drag-end",this.onDragEnd.bind(this)),t.firstChild.addEventListener("dragover",this.onDragOver.bind(this)),t.firstChild.addEventListener("dragleave",this.onDragLeave.bind(this)),t.firstChild.addEventListener("drop",this.onDrop.bind(this))}removeListeners(t){pt.Z.$off("drag-start",this.onDragStart),pt.Z.$off("drag-end",this.onDragEnd),t.firstChild.removeEventListener("dragover",this.onDragOver),t.firstChild.removeEventListener("dragleave",this.onDragLeave),t.firstChild.removeEventListener("drop",this.onDrop)}setStatus(t){this.el.setAttribute("droppable-mailbox",t)}onDragStart(t){this.draggableInfo=t,this.canBeDropped()||this.setStatus("disabled")}canBeDropped(){return this.isSameAccount()&&this.options.isValidDropTarget}isSameAccount(){return this.draggableInfo.accountId===this.options.accountId}onDragEnd(){this.setInitialAttributes()}onDragOver(t){t.preventDefault(),this.draggableInfo.mailboxId!==this.options.mailboxId&&(this.options.isValidDropTarget&&this.setStatus("dragover"),t.dataTransfer.dropEffect="move")}onDragLeave(t){t.preventDefault(),this.setStatus("enabled")}async onDrop(t){if(t.preventDefault(),this.draggableInfo.mailboxId===this.options.mailboxId)return;this.setInitialAttributes();const e=JSON.parse(t.dataTransfer.getData("text"));pt.Z.$emit("envelopes-dropped",{envelopes:e});try{const t=e.map((async t=>await this.processDroppedItem(parseInt(t.envelopeId))));await Promise.all(t)}catch(t){p.Z.error("could not process dropped messages",t)}finally{pt.Z.$emit("envelopes-moved",{mailboxId:this.options.mailboxId,movedEnvelopes:e})}}async processDroppedItem(t){const e=document.querySelector('[data-envelope-id="'.concat(t,'"]'));e.setAttribute("draggable-envelope","pending");try{await ut.Z.dispatch("moveMessage",{id:t,destMailboxId:this.options.mailboxId})}catch(t){e.removeAttribute("draggable-envelope"),p.Z.error("could not move messages",t)}}}let At;const bt={bind(t,e,a){At=new mt(t,a.context,e.value)},componentUpdated(t,e){At.options=e.value,At.update(t,At)}};var ht=i(94654);const gt={name:"NavigationMailbox",components:{AppNavigationItem:o.tn,CounterBubble:o.JN,ActionText:o.L1,ActionButton:o.Js,ActionCheckbox:o.Bt,ActionInput:o.Iw,IconSend:et.Z,IconDelete:v.Z,IconEmailCheck:F.Z,IconExternal:L.Z,IconFolderAdd:Y.Z,IconFolderRename:V.Z,IconFolderSync:j.Z,IconInfo:A.Z,IconAllInboxes:Q.Z,IconFavorite:q.default,IconFolder:h.default,IconFolderShared:K.Z,IconDraft:G.default,IconArchive:H.Z,IconJunk:W.Z,IconInbox:J.Z,EraserVariant:X.Z,ImportantIcon:tt.Z,IconLoading:o.lb,MoveMailboxModal:it,AlarmIcon:ht.Z},directives:{droppableMailbox:bt},props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0},filter:{type:String,default:"",required:!1}},data(){var t;return{debug:(null===(t=window)||void 0===t||null===(t=t.OC)||void 0===t?void 0:t.debug)||!1,mailboxStats:void 0,loadingMarkAsRead:!1,clearingCache:!1,showSaving:!1,changeSubscription:!1,changingSyncInBackground:!1,editing:!1,showSubMailboxes:!1,menuOpen:!1,renameLabel:!0,renameInput:!1,mailboxName:this.mailbox.displayName,showMoveModal:!1,hasDelimiter:!!this.mailbox.delimiter,UNIFIED_INBOX_ID:ot.e0,createMailboxName:""}},computed:{visible(){return(!1===this.account.showSubscribedOnly||this.mailbox.attributes&&this.mailbox.attributes.includes("\\subscribed"))&&this.isUnifiedButOnlyInbox},notInbox(){return"inbox"!==this.mailbox.name.toLowerCase()},notVirtual(){return!this.account.isUnified&&"flagged"!==this.mailbox.specialRole&&!this.filter},title(){return"starred"===this.filter?(0,ct.I)({...this.mailbox,specialUse:["flagged"]}):(0,ct.I)(this.mailbox)},to(){return{name:"mailbox",params:{mailboxId:this.mailbox.databaseId,filter:this.filter?this.filter:void 0}}},hasSubMailboxes(){return this.subMailboxes.length>0},subMailboxes(){return this.$store.getters.getSubMailboxes(this.mailbox.databaseId)},statsText(){return this.mailboxStats&&"total"in this.mailboxStats&&"unread"in this.mailboxStats?0===this.mailboxStats.unread?(0,lt.uN)("mail","{total} message","{total} messages",this.mailboxStats.total,{total:this.mailboxStats.total}):(0,lt.uN)("mail","{unread} unread of {total}","{unread} unread of {total}",this.mailboxStats.unread,{total:this.mailboxStats.total,unread:this.mailboxStats.unread}):t("mail","Loading …")},isSubscribed(){return this.mailbox.attributes&&this.mailbox.attributes.includes("\\subscribed")},isDroppableSpecialMailbox(){return"starred"!==this.filter&&![this.account.draftsMailboxId,this.account.sentMailboxId].includes(this.mailbox.databaseId)},isActive(){return this.$route.params.mailboxId===this.mailbox.databaseId},isValidDropTarget(){return!(this.isActive||!this.hasInsertAcl)&&(this.isDroppableSpecialMailbox||!this.mailbox.specialRole&&!this.account.isUnified)},isUnifiedButOnlyInbox(){return!this.mailbox.isUnified||this.mailbox.specialUse.includes("inbox")&&this.$store.getters.accounts.length>2},showUnreadCounter(){return"starred"!==this.filter&&"trash"!==this.mailbox.specialRole&&(this.mailbox.unread>0||this.subCounter>0)},subCounter(){return this.subMailboxes.reduce(((t,e)=>t+e.unread),0)},hasRenameAcl(){if(!this.mailbox.myAcls)return!0;const t=this.$store.getters.getParentMailbox(this.mailbox.databaseId);return t&&t.myAcls?(0,nt.Y)(this.mailbox,"x")&&(0,nt.Y)(t,"k"):(0,nt.Y)(this.mailbox,"x")},hasInsertAcl(){return(0,nt.Y)(this.mailbox,"i")},hasSeenAcl(){return(0,nt.Y)(this.mailbox,"s")},hasSubmailboxActionAcl(){return(0,nt.Y)(this.mailbox,"k")},hasDeleteAcl(){return(0,nt.Y)(this.mailbox,"x")},hasClearMailboxAcl(){return(0,nt.Y)(this.mailbox,"te")}},mounted(){pt.Z.$on("drag-start",this.onDragStart),pt.Z.$on("drag-end",this.onDragEnd),pt.Z.$on("envelopes-moved",this.onEnvelopesMoved)},beforeDestroy(){pt.Z.$off("drag-start",this.onDragStart),pt.Z.$off("drag-end",this.onDragEnd),pt.Z.$off("envelopes-moved",this.onEnvelopesMoved)},methods:{genId:t=>"mailbox-"+t.databaseId,onMenuToggle(t){t&&this.fetchMailboxStats()},async fetchMailboxStats(){if(this.mailboxStats=null,!this.account.isUnified&&"flagged"!==this.mailbox.specialRole)try{const t=await(0,rt.Y2)(this.mailbox.databaseId);p.Z.debug("loaded mailbox stats for ".concat(this.mailbox.databaseId),{stats:t}),this.mailboxStats=t}catch(t){this.mailboxStats={error:!0},p.Z.error("could not load mailbox stats for ".concat(this.mailbox.databaseId),t)}},async createMailbox(t){this.editing=!0;const e=this.createMailboxName,a=this.mailbox.name+this.mailbox.delimiter+e;p.Z.info("creating mailbox ".concat(a," as submailbox of ").concat(this.mailbox.databaseId)),this.menuOpen=!1;try{await this.$store.dispatch("createMailbox",{account:this.account,name:a})}catch(t){throw p.Z.error("could not create mailbox ".concat(a),{error:t}),t}finally{this.editing=!1,this.showSaving=!1}p.Z.info("mailbox ".concat(a," created")),this.showSubMailboxes=!0},openCreateMailbox(){this.editing=!0,this.showSaving=!1},markAsRead(){this.loadingMarkAsRead=!0,this.$store.dispatch("markMailboxRead",{accountId:this.account.id,mailboxId:this.mailbox.databaseId}).then((()=>p.Z.info("mailbox ".concat(this.mailbox.databaseId," marked as read")))).catch((t=>p.Z.error("could not mark mailbox ".concat(this.mailbox.databaseId," as read"),{error:t}))).then((()=>this.loadingMarkAsRead=!1))},async changeFolderSubscription(t){try{this.changeSubscription=!0,await this.$store.dispatch("changeMailboxSubscription",{mailbox:this.mailbox,subscribed:t})}catch(t){throw p.Z.error("could not update subscription of mailbox ".concat(this.mailbox.databaseId),{error:t}),t}finally{this.changeSubscription=!1}},async changeSyncInBackground(t){try{this.changingSyncInBackground=!0,await this.$store.dispatch("patchMailbox",{mailbox:this.mailbox,attributes:{syncInBackground:t}})}catch(t){throw p.Z.error("could not update background sync flag of mailbox ".concat(this.mailbox.databaseId),{error:t}),t}finally{this.changingSyncInBackground=!1}},async clearCache(){try{this.clearingCache=!0,p.Z.debug("clearing message cache",{accountId:this.account.id,mailboxId:this.mailbox.databaseId}),await(0,st.LK)(this.account.id,this.mailbox.databaseId),window.location.reload(!1)}finally{this.clearCache=!1}},clearMailbox(){const e=this.mailbox.databaseId;OC.dialogs.confirmDestructive(t("mail","All messages in mailbox will be deleted."),t("mail","Clear mailbox {name}",{name:this.mailbox.displayName}),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Clear mailbox"),confirmClasses:"error",cancel:t("mail","Cancel")},(t=>{if(t)return this.$store.dispatch("clearMailbox",{mailbox:this.mailbox}).then((()=>{p.Z.info("mailbox ".concat(e," cleared"))})).catch((t=>p.Z.error("could not clear mailbox",{error:t})))}))},deleteMailbox(){const e=this.mailbox.databaseId;p.Z.info("delete mailbox",{mailbox:this.mailbox}),OC.dialogs.confirmDestructive(t("mail","The mailbox and all messages in it will be deleted."),t("mail","Delete mailbox"),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Delete mailbox {name}",{name:this.mailbox.displayName}),confirmClasses:"error",cancel:t("mail","Cancel")},(t=>{if(t)return this.$store.dispatch("deleteMailbox",{mailbox:this.mailbox}).then((()=>{p.Z.info("mailbox ".concat(e," deleted")),parseInt(this.$route.params.mailboxId,10)===this.mailbox.databaseId&&this.$router.push({name:"mailbox",params:{mailboxId:ot.cd}})})).catch((t=>p.Z.error("could not delete mailbox",{error:t})))}))},async renameMailbox(){this.renameInput=!1,this.showSaving=!1;try{await this.$store.dispatch("renameMailbox",{account:this.account,mailbox:this.mailbox,newName:this.mailboxName}),this.renameLabel=!0,this.renameInput=!1,this.showSaving=!1}catch(e){(0,dt.JQ)(t("mail","An error occurred, unable to rename the mailbox.")),console.error(e),this.renameLabel=!1,this.renameInput=!1,this.showSaving=!0}},openRenameInput(){this.renameLabel=!1,this.renameInput=!0,this.showSaving=!1},onOpenMoveModal(){this.showMoveModal=!0},onCloseMoveModal(){this.showMoveModal=!1},onDragStart(t){let{accountId:e}=t;e===this.mailbox.accountId&&(this.$store.commit("expandAccount",e),this.showSubMailboxes=!0)},onDragEnd(t){let{accountId:e}=t;e===this.mailbox.accountId&&(this.showSubMailboxes=!1)},onEnvelopesMoved(t){let{mailboxId:e,movedEnvelopes:a}=t;if(this.mailbox.databaseId!==e)return;const i=a.find((t=>t.envelopeId===this.$route.params.threadId));var o;"message"===this.$route.name&&i&&this.$router.push({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId,filter:null===(o=this.$route.params)||void 0===o?void 0:o.filter}})}}};var xt=i(71481),vt={};vt.styleTagTransform=$(),vt.setAttributes=E(),vt.insert=D().bind(null,"head"),vt.domAPI=B(),vt.insertStyleElement=N(),S()(xt.Z,vt),xt.Z&&xt.Z.locals&&xt.Z.locals;const ft=(0,y.Z)(gt,(function(){var t=this,e=t._self._c;return t.visible?e("AppNavigationItem",{directives:[{name:"droppable-mailbox",rawName:"v-droppable-mailbox",value:{mailboxId:t.mailbox.databaseId,accountId:t.mailbox.accountId,isValidDropTarget:t.isValidDropTarget},expression:"{\n\t\tmailboxId: mailbox.databaseId,\n\t\taccountId: mailbox.accountId,\n\t\tisValidDropTarget,\n\t}"}],key:t.genId(t.mailbox),attrs:{id:t.genId(t.mailbox),"allow-collapse":!0,"menu-open":t.menuOpen,"force-menu":!0,title:t.title,to:t.to,open:t.showSubMailboxes},on:{"update:menuOpen":[function(e){t.menuOpen=e},t.onMenuToggle],"update:menu-open":function(e){t.menuOpen=e},"update:open":function(e){t.showSubMailboxes=e}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("div",[t.mailbox.isPriorityInbox?e("ImportantIcon",{attrs:{size:20}}):t.mailbox.id===t.UNIFIED_INBOX_ID?e("IconAllInboxes",{attrs:{size:20}}):"inbox"!==t.mailbox.specialRole||t.mailbox.isPriorityInbox||"starred"===t.filter?"starred"===t.filter?e("IconFavorite",{attrs:{size:20}}):t.mailbox.databaseId===t.account.draftsMailboxId?e("IconDraft",{attrs:{size:20}}):t.mailbox.databaseId===t.account.sentMailboxId?e("IconSend",{attrs:{size:20}}):t.mailbox.databaseId===t.account.archiveMailboxId?e("IconArchive",{attrs:{size:20}}):t.mailbox.databaseId===t.account.trashMailboxId?e("IconDelete",{attrs:{size:20}}):t.mailbox.databaseId===t.account.junkMailboxId?e("IconJunk",{attrs:{size:20}}):t.mailbox.databaseId===t.account.snoozeMailboxId?e("AlarmIcon",{attrs:{size:20}}):t.mailbox.shared?e("IconFolderShared",{attrs:{size:20}}):e("IconFolder",{attrs:{size:20}}):e("IconInbox",{attrs:{size:20}})],1)]},proxy:!0}],null,!1,2020813215)},[t._v(" "),e("template",{slot:"actions"},[t.account.isUnified||"flagged"===t.mailbox.specialRole?t._e():e("ActionText",{attrs:{title:t.mailbox.name},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{title:t.statsText,size:20}})]},proxy:!0}],null,!1,3059915399)},[t._v("\n\t\t\t"+t._s(t.statsText)+"\n\t\t")]),t._v(" "),"flagged"!==t.mailbox.specialRole&&!t.account.isUnified&&t.hasSeenAcl?e("ActionButton",{attrs:{title:t.t("mail","Mark all as read"),disabled:t.loadingMarkAsRead},on:{click:t.markAsRead},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconEmailCheck",{attrs:{size:20}})]},proxy:!0}],null,!1,46646313)},[t._v("\n\t\t\t"+t._s(t.t("mail","Mark all messages of this mailbox as read"))+"\n\t\t")]):t._e(),t._v(" "),!t.editing&&!t.account.isUnified&&t.hasDelimiter&&"flagged"!==t.mailbox.specialRole&&t.hasSubmailboxActionAcl?e("ActionButton",{on:{click:t.openCreateMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)},[t._v("\n\t\t\t"+t._s(t.t("mail","Add submailbox"))+"\n\t\t")]):t._e(),t._v(" "),t.editing?e("ActionInput",{attrs:{value:t.createMailboxName},on:{"update:value":function(e){t.createMailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.createMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)}):t._e(),t._v(" "),t.renameLabel&&!t.hasSubMailboxes&&!t.account.isUnified&&t.hasRenameAcl?e("ActionButton",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.openRenameInput.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderRename",{attrs:{size:20}})]},proxy:!0}],null,!1,2880355077)},[t._v("\n\t\t\t"+t._s(t.t("mail","Edit name"))+"\n\t\t")]):t._e(),t._v(" "),t.renameInput?e("ActionInput",{attrs:{value:t.mailboxName},on:{"update:value":function(e){t.mailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.renameMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderRename",{attrs:{title:t.t("mail","Edit name"),size:20}})]},proxy:!0}],null,!1,2185581176)}):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:20}})]},proxy:!0}],null,!1,3081367109)},[t._v("\n\t\t\t"+t._s(t.t("mail","Saving"))+"\n\t\t")]):t._e(),t._v(" "),t.account.isUnified||!t.hasDelimiter||t.mailbox.specialRole||t.hasSubMailboxes||!t.hasDeleteAcl?t._e():e("ActionButton",{attrs:{id:t.genId(t.mailbox),"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconExternal",{attrs:{size:20}})]},proxy:!0}],null,!1,1464797790)},[t._v("\n\t\t\t"+t._s(t.t("mail","Move mailbox"))+"\n\t\t")]),t._v(" "),t.debug&&!t.account.isUnified&&"flagged"!==t.mailbox.specialRole?e("ActionButton",{attrs:{title:t.t("mail","Clear cache"),disabled:t.clearingCache},on:{click:t.clearCache},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderSync",{attrs:{size:20}})]},proxy:!0}],null,!1,3488227250)},[t._v("\n\t\t\t"+t._s(t.t("mail","Clear locally cached data, in case there are issues with synchronization."))+"\n\t\t")]):t._e(),t._v(" "),t.notVirtual?e("ActionCheckbox",{attrs:{checked:t.isSubscribed,disabled:t.changeSubscription},on:{"update:checked":t.changeFolderSubscription}},[t._v("\n\t\t\t"+t._s(t.t("mail","Subscribed"))+"\n\t\t")]):t._e(),t._v(" "),t.notVirtual&&t.notInbox?e("ActionCheckbox",{attrs:{checked:t.mailbox.syncInBackground,disabled:t.changingSyncInBackground},on:{"update:checked":t.changeSyncInBackground}},[t._v("\n\t\t\t"+t._s(t.t("mail","Sync in background"))+"\n\t\t")]):t._e(),t._v(" "),"flagged"!==t.mailbox.specialRole&&!t.account.isUnified&&t.hasClearMailboxAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.clearMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("EraserVariant",{attrs:{size:20}})]},proxy:!0}],null,!1,3994454445)},[t._v("\n\t\t\t"+t._s(t.t("mail","Clear mailbox"))+"\n\t\t")]):t._e(),t._v(" "),t.account.isUnified||t.mailbox.specialRole||t.hasSubMailboxes||!t.hasDeleteAcl?t._e():e("ActionButton",{on:{click:t.deleteMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[t._v("\n\t\t\t"+t._s(t.t("mail","Delete mailbox"))+"\n\t\t")])],1),t._v(" "),t.showUnreadCounter&&t.subCounter?e("CounterBubble",{attrs:{slot:"counter"},slot:"counter"},[t._v("\n\t\t"+t._s(t.mailbox.unread)+" ("+t._s(t.subCounter)+")\n\t")]):t.showUnreadCounter?e("CounterBubble",{attrs:{slot:"counter"},slot:"counter"},[t._v("\n\t\t"+t._s(t.mailbox.unread)+"\n\t")]):t._e(),t._v(" "),e("template",{slot:"extra"},[t.showMoveModal?e("MoveMailboxModal",{attrs:{account:t.account,mailbox:t.mailbox},on:{close:t.onCloseMoveModal}}):t._e()],1),t._v(" "),t._l(t.subMailboxes,(function(a){return e("NavigationMailbox",{key:t.genId(a),attrs:{account:t.account,mailbox:a}})}))],2):t._e()}),[],!1,null,"3b571186",null).exports;var Ct=i(15091);const _t={name:"NavigationOutbox",components:{AppNavigationItem:o.tn,CounterBubble:o.JN,IconOutbox:Ct.Z},computed:{count(){return this.$store.getters["outbox/getAllMessages"].length},to:()=>({name:"outbox"})}};var yt=i(51100),It={};It.styleTagTransform=$(),It.setAttributes=E(),It.insert=D().bind(null,"head"),It.domAPI=B(),It.insertStyleElement=N(),S()(yt.Z,It),yt.Z&&yt.Z.locals&&yt.Z.locals;const wt=(0,y.Z)(_t,(function(){var t=this,e=t._self._c;return e("AppNavigationItem",{key:"navigation-outbox",attrs:{id:"navigation-outbox",title:t.t("mail","Outbox"),to:t.to},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconOutbox",{staticClass:"outbox-opacity-icon",attrs:{size:20}})]},proxy:!0},{key:"counter",fn:function(){return[t.count?e("CounterBubble",{staticClass:"navigation-outbox__unread-counter"},[t._v("\n\t\t\t"+t._s(t.count)+"\n\t\t")]):t._e()]},proxy:!0}])})}),[],!1,null,"701039d4",null).exports;var kt=i(99270),St=i(730),Mt=i(56194);const Bt={name:"KeyboardShortcuts",components:{Modal:o.Jc}};var Zt=i(41004),Dt={};Dt.styleTagTransform=$(),Dt.setAttributes=E(),Dt.insert=D().bind(null,"head"),Dt.domAPI=B(),Dt.insertStyleElement=N(),S()(Zt.Z,Dt),Zt.Z&&Zt.Z.locals&&Zt.Z.locals;const Tt=(0,y.Z)(Bt,(function(){var t=this,e=t._self._c;return e("Modal",{attrs:{size:"large",title:t.t("mail","Keyboard shortcut")},on:{close:function(e){return t.$emit("close")}}},[e("h2",[t._v(t._s(t.t("mail","Keyboard shortcuts")))]),t._v(" "),e("p",[t._v(t._s(t.t("mail","Speed up your Mail experience with these quick shortcuts.")))]),t._v(" "),e("dl",[e("div",[e("dt",[e("kbd",[t._v("C")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Compose new message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("←")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Newer message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("→")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Older message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("S")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Toggle star")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("U")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Toggle unread")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("A")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Archive")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Del")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Delete")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Ctrl")]),t._v(" + "),e("kbd",[t._v("F")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Search")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Ctrl")]),t._v(" + "),e("kbd",[t._v("Enter")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Send")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("R")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Refresh")))])])])])}),[],!1,null,"17eaba5f",null).exports;var Et=i(20629),Pt=i(80351),Nt=i.n(Pt),Ot=i(22079),$t=i.n(Ot);class zt extends Error{constructor(){super(),this.name=zt.name}}const Ut="pkcs12",Rt={name:"SmimeCertificateModal",components:{NcModal:o.Jc,NcButton:o.P2,NcPasswordField:o.pS,NcEmptyContent:o.SL,DeleteIcon:v.Z},data:()=>({TYPE_PKCS12:Ut,TYPE_PEM:"pem",moment:Nt(),showImportScreen:!1,loading:!1,certificateType:Ut,certificate:void 0,privateKey:void 0,password:""}),computed:{...(0,Et.Se)({certificates:"getSmimeCertificates"}),inputFormIsValid(){return!!this.certificate}},async mounted(){await this.$store.dispatch("fetchSmimeCertificates")},methods:{async deleteCertificate(t){await this.$store.dispatch("deleteSmimeCertificate",t)},async uploadCertificate(){let e,a=this.$refs.certificate.files[0];if(this.certificateType===Ut)try{const t=function(t,e){const a=new($t().util.ByteBuffer)(t),i=$t().asn1.fromDer(a),o=$t().pkcs12.pkcs12FromAsn1(i,e),n=t=>o.getBags({bagType:t})[t],s=n($t().pki.oids.certBag),r=n($t().pki.oids.pkcs8ShroudedKeyBag);if(0===s.length)throw new zt("The PKCS #12 certificate must contain at least one certificate");if(1!==r.length)throw new zt("The PKCS #12 certificate must contain a single key");return{certificate:$t().pki.certificateToPem(s[0].cert),privateKey:$t().pki.privateKeyToPem(r[0].key)}}(await a.arrayBuffer(),this.password);a=new Blob([t.certificate]),e=new Blob([t.privateKey])}catch(e){return void(e.name===zt.name?(p.Z.error("PKCS #12 certificate contains multiple certs or keys",{error:e}),(0,dt.x2)(t("mail","The provided PKCS #12 certificate must contain at least one certificate and exactly one private key."))):(p.Z.debug("Is probably not a PKCS #12 certificate or the password is wrong",{error:e}),(0,dt.x2)(t("mail","Failed to import the certificate. Please check the password."))))}else{if("pem"!==this.certificateType)return;e=this.$refs.privateKey.files[0]}this.loading=!0;try{await this.$store.dispatch("createSmimeCertificate",{certificate:a,privateKey:e}),(0,dt.s$)(t("mail","Certificate imported successfully")),this.resetImportForm()}catch(a){var i;p.Z.error("Failed to import a S/MIME certificate: ".concat(null===(i=a.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.data),{error:a}),e?(0,dt.x2)(t("mail","Failed to import the certificate. Please make sure that the private key matches the certificate and is not protected by a passphrase.")):(0,dt.x2)(t("mail","Failed to import the certificate"))}finally{this.loading=!1}},resetImportForm(){this.certificateType=Ut,this.showImportScreen=!1,this.certificate=void 0,this.privateKey=void 0,this.password=""}}};var Ft=i(4117),Lt={};Lt.styleTagTransform=$(),Lt.setAttributes=E(),Lt.insert=D().bind(null,"head"),Lt.domAPI=B(),Lt.insertStyleElement=N(),S()(Ft.Z,Lt),Ft.Z&&Ft.Z.locals&&Ft.Z.locals;const Kt=(0,y.Z)(Rt,(function(){var t=this,e=t._self._c;return e("NcModal",{on:{close:function(e){return t.$emit("close")}}},[e("div",{staticClass:"certificate-modal"},[t.showImportScreen?e("form",{staticClass:"certificate-modal__import",on:{submit:function(e){return e.preventDefault(),t.uploadCertificate.apply(null,arguments)}}},[e("h2",[t._v(t._s(t.t("mail","Import S/MIME certificate")))]),t._v(" "),e("fieldset",{staticClass:"certificate-modal__import__type"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.certificateType,expression:"certificateType"}],attrs:{id:"certificate-type-pkcs12",name:"certificate-type",type:"radio"},domProps:{value:t.TYPE_PKCS12,checked:t._q(t.certificateType,t.TYPE_PKCS12)},on:{change:function(e){t.certificateType=t.TYPE_PKCS12}}}),t._v(" "),e("label",{attrs:{for:"certificate-type-pkcs12"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","PKCS #12 Certificate"))+"\n\t\t\t\t\t")])]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.certificateType,expression:"certificateType"}],attrs:{id:"certificate-type-pem",name:"certificate-type",type:"radio"},domProps:{value:t.TYPE_PEM,checked:t._q(t.certificateType,t.TYPE_PEM)},on:{change:function(e){t.certificateType=t.TYPE_PEM}}}),t._v(" "),e("label",{attrs:{for:"certificate-type-pem"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","PEM Certificate"))+"\n\t\t\t\t\t")])])]),t._v(" "),e("fieldset",[e("label",{attrs:{for:"certificate"}},[t._v(t._s(t.t("mail","Certificate")))]),t._v(" "),e("input",{ref:"certificate",attrs:{id:"certificate",type:"file",required:""},on:{change:function(e){t.certificate=e.target.files[0]}}})]),t._v(" "),t.certificateType===t.TYPE_PEM?e("fieldset",[e("label",{attrs:{for:"private-key"}},[t._v(t._s(t.t("mail","Private key (optional)")))]),t._v(" "),e("input",{ref:"privateKey",attrs:{id:"private-key",type:"file"},on:{change:function(e){t.privateKey=e.target.files[0]}}})]):t._e(),t._v(" "),t.certificateType===t.TYPE_PKCS12?e("fieldset",[e("label",{attrs:{for:"password"}},[t._v(t._s(t.t("mail","Password")))]),t._v(" "),e("NcPasswordField",{attrs:{value:t.password,label:t.t("mail","Password")},on:{"update:value":function(e){t.password=e}}})],1):t._e(),t._v(" "),e("div",{staticClass:"certificate-modal__import__hints"},[t.certificateType===t.TYPE_PEM?e("p",[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","The private key is only required if you intend to send signed and encrypted emails using this certificate."))+"\n\t\t\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"certificate-modal__import__actions"},[e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Back")},on:{click:t.resetImportForm}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Back"))+"\n\t\t\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"primary","aria-label":t.t("mail","Submit"),"native-type":"submit",disabled:t.loading||!t.inputFormIsValid}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Submit"))+"\n\t\t\t\t")])],1)]):e("div",{staticClass:"certificate-modal__list"},[e("h2",[t._v(t._s(t.t("mail","S/MIME certificates")))]),t._v(" "),e("table",{staticClass:"certificate-modal__list__table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.t("mail","Certificate name")))]),t._v(" "),e("th",[t._v(t._s(t.t("mail","E-mail address")))]),t._v(" "),e("th",[t._v(t._s(t.t("mail","Valid until")))]),t._v(" "),e("th")])]),t._v(" "),e("tbody",t._l(t.certificates,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.info.commonName))]),t._v(" "),e("td",[t._v(t._s(a.info.emailAddress))]),t._v(" "),e("td",[t._v(t._s(t.moment.unix(a.info.notAfter).format("LL")))]),t._v(" "),e("td",[e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Delete certificate")},on:{click:function(e){return t.deleteCertificate(a.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{title:t.t("mail","Delete certificate"),size:20}})]},proxy:!0}],null,!0)})],1)])})),0)]),t._v(" "),0===t.certificates.length?e("NcEmptyContent",{staticClass:"certificate__empty",attrs:{title:t.t("mail","No certificate imported yet")}}):t._e(),t._v(" "),e("div",{staticClass:"certificate-modal__list__actions"},[e("NcButton",{attrs:{type:"primary","aria-label":t.t("mail","Import certificate")},on:{click:function(e){t.showImportScreen=!0}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Import certificate"))+"\n\t\t\t\t")])],1)],1)])])}),[],!1,null,"2caf23ca",null).exports,Yt={name:"AppSettingsMenu",components:{ButtonVue:o.P2,KeyboardShortcuts:Tt,IconInfo:A.Z,IconEmail:St.Z,IconAdd:kt.Z,IconLoading:o.lb,IconLock:Mt.Z,SmimeCertificateModal:Kt,CheckboxRadioSwitch:o.rw},data:()=>({loadingAvatarSettings:!1,prioritySettingsText:t("mail","Search in the body of messages in priority Inbox"),loadingPrioritySettings:!1,optOutSettingsText:t("mail","Allow the app to collect data about your interactions. Based on this data, the app will adapt to your preferences. The data will only be stored locally."),loadingOptOutSettings:!1,replySettingsText:t("mail","Put my text to the bottom of a reply instead of on top of it."),loadingReplySettings:!1,displayKeyboardShortcuts:!1,autoTaggingText:t("mail","Automatically classify importance of new email"),toggleAutoTagging:!1,displaySmimeCertificateModal:!1,sortOrder:"newest"}),computed:{searchPriorityBody(){return"true"===this.$store.getters.getPreference("search-priority-body","false")},useBottomReplies(){return"bottom"===this.$store.getters.getPreference("reply-mode","top")},useExternalAvatars(){return"true"===this.$store.getters.getPreference("external-avatars","true")},useDataCollection(){return"true"===this.$store.getters.getPreference("collect-data","true")},useAutoTagging(){return"true"===this.$store.getters.getPreference("tag-classified-messages","true")},allowNewMailAccounts(){return this.$store.getters.getPreference("allow-new-accounts",!0)}},mounted(){this.sortOrder=this.$store.getters.getPreference("sort-order","newest")},methods:{onToggleButtonReplies(t){this.loadingReplySettings=!0,this.$store.dispatch("savePreference",{key:"reply-mode",value:t.target.checked?"bottom":"top"}).catch((t=>p.Z.error("could not save preferences",{error:t}))).then((()=>{this.loadingReplySettings=!1}))},onToggleExternalAvatars(t){this.loadingAvatarSettings=!0,this.$store.dispatch("savePreference",{key:"external-avatars",value:t.target.checked?"true":"false"}).catch((t=>p.Z.error("could not save preferences",{error:t}))).then((()=>{this.loadingAvatarSettings=!1}))},async onToggleSearchPriorityBody(t){this.loadingPrioritySettings=!0;try{await this.$store.dispatch("savePreference",{key:"search-priority-body",value:t.target.checked?"true":"false"})}catch(t){p.Z.error("could not save preferences",{error:t})}finally{this.loadingPrioritySettings=!1}},onToggleCollectData(t){this.loadingOptOutSettings=!0,this.$store.dispatch("savePreference",{key:"collect-data",value:t.target.checked?"true":"false"}).catch((t=>p.Z.error("could not save preferences",{error:t}))).then((()=>{this.loadingOptOutSettings=!1}))},async onSortByDate(e){const a=this.sortOrder;try{this.sortOrder=e,await this.$store.dispatch("savePreference",{key:"sort-order",value:e}),this.$store.commit("removeAllEnvelopes")}catch(e){p.Z.error("could not save preferences",{error:e}),this.sortOrder=a,(0,dt.x2)(t("mail","Could not update preference"))}},async onToggleAutoTagging(e){this.toggleAutoTagging=!0;try{await this.$store.dispatch("savePreference",{key:"tag-classified-messages",value:e.target.checked?"true":"false"})}catch(e){p.Z.error("could not save preferences",{error:e}),(0,dt.x2)(t("mail","Could not update preference"))}finally{this.toggleAutoTagging=!1}},registerProtocolHandler(){if(window.navigator.registerProtocolHandler){const t=window.location.protocol+"//"+window.location.host+(0,r.generateUrl)("apps/mail/compose?uri=%s");try{window.navigator.registerProtocolHandler("mailto",t,OC.theme.name+" Mail")}catch(t){p.Z.error("could not register protocol handler",{err:t})}}},showKeyboardShortcuts(){this.displayKeyboardShortcuts=!0},closeKeyboardShortcuts(){this.displayKeyboardShortcuts=!1},toggleKeyboardShortcuts(){this.displayKeyboardShortcuts=!this.displayKeyboardShortcuts}}};var qt=i(58721),Vt={};Vt.styleTagTransform=$(),Vt.setAttributes=E(),Vt.insert=D().bind(null,"head"),Vt.domAPI=B(),Vt.insertStyleElement=N(),S()(qt.Z,Vt),qt.Z&&qt.Z.locals&&qt.Z.locals;const jt=(0,y.Z)(Yt,(function(){var t=this,e=t._self._c;return e("div",[t.allowNewMailAccounts?e("router-link",{staticClass:"app-settings-button button primary new-button",attrs:{to:"/setup"}},[e("IconAdd",{attrs:{size:20}}),t._v("\n\t\t"+t._s(t.t("mail","Add mail account"))+"\n\t")],1):t._e(),t._v(" "),t.loadingPrioritySettings?e("p",{staticClass:"app-settings"},[t._v("\n\t\t"+t._s(t.prioritySettingsText)+"\n\t")]):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"priority-inbox-toggle",type:"checkbox"},domProps:{checked:t.searchPriorityBody},on:{change:t.onToggleSearchPriorityBody}}),t._v(" "),e("label",{attrs:{for:"priority-inbox-toggle"}},[t._v(t._s(t.prioritySettingsText))])]),t._v(" "),t.loadingOptOutSettings?e("p",{staticClass:"app-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t"+t._s(t.optOutSettingsText)+"\n\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"data-collection-toggle",type:"checkbox"},domProps:{checked:t.useDataCollection},on:{change:t.onToggleCollectData}}),t._v(" "),e("label",{attrs:{for:"data-collection-toggle"}},[t._v(t._s(t.optOutSettingsText))])]),t._v(" "),t.toggleAutoTagging?e("p",{staticClass:"app-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t"+t._s(t.autoTaggingText)+"\n\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"auto-tagging-toggle",type:"checkbox"},domProps:{checked:t.useAutoTagging},on:{change:t.onToggleAutoTagging}}),t._v(" "),e("label",{attrs:{for:"auto-tagging-toggle"}},[t._v(t._s(t.autoTaggingText))])]),t._v(" "),t.loadingAvatarSettings?e("p",{staticClass:"app-settings avatar-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t"+t._s(t.t("mail","Use Gravatar and favicon avatars"))+"\n\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"gravatar-enabled",type:"checkbox"},domProps:{checked:t.useExternalAvatars},on:{change:t.onToggleExternalAvatars}}),t._v(" "),e("label",{attrs:{for:"gravatar-enabled"}},[t._v(t._s(t.t("mail","Use Gravatar and favicon avatars")))])]),t._v(" "),t.loadingReplySettings?e("p",{staticClass:"app-settings reply-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t"+t._s(t.replySettingsText)+"\n\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"bottom-reply-enabled",type:"checkbox"},domProps:{checked:t.useBottomReplies},on:{change:t.onToggleButtonReplies}}),t._v(" "),e("label",{attrs:{for:"bottom-reply-enabled"}},[t._v(t._s(t.replySettingsText))])]),t._v(" "),e("p",[e("ButtonVue",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Register as application for mail links")},on:{click:t.registerProtocolHandler},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconEmail",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Register as application for mail links"))+"\n\t\t")])],1),t._v(" "),e("ButtonVue",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Show keyboard shortcuts")},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showKeyboardShortcuts.apply(null,arguments)},shortkey:t.toggleKeyboardShortcuts},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Show keyboard shortcuts"))+"\n\t")]),t._v(" "),t.displayKeyboardShortcuts?e("KeyboardShortcuts",{on:{close:t.closeKeyboardShortcuts}}):t._e(),t._v(" "),e("ButtonVue",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Manage S/MIME certificates")},on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.displaySmimeCertificateModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLock",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Manage S/MIME certificates"))+"\n\t")]),t._v(" "),t.displaySmimeCertificateModal?e("SmimeCertificateModal",{on:{close:function(e){t.displaySmimeCertificateModal=!1}}}):t._e(),t._v(" "),e("h2",{staticClass:"section-title"},[t._v("\n\t\tSorting\n\t")]),t._v(" "),e("div",{staticClass:"sorting"},[e("CheckboxRadioSwitch",{staticClass:"sorting__switch",attrs:{checked:t.sortOrder,value:"newest",name:"order_radio",type:"radio"},on:{"update:checked":t.onSortByDate}},[t._v("\n\t\t\t"+t._s(t.t("mail","Newest"))+"\n\t\t")]),t._v(" "),e("CheckboxRadioSwitch",{staticClass:"sorting__switch",attrs:{checked:t.sortOrder,value:"oldest",name:"order_radio",type:"radio"},on:{"update:checked":t.onSortByDate}},[t._v("\n\t\t\t"+t._s(t.t("mail","Oldest"))+"\n\t\t")])],1),t._v(" "),e("p",{staticClass:"mailvelope-section"},[t._v("\n\t\t"+t._s(t.t("mail","Looking for a way to encrypt your emails?"))+"\n\t")]),t._v(" "),e("a",{attrs:{href:"https://www.mailvelope.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("\n\t\t"+t._s(t.t("mail","Install Mailvelope browser extension here"))+"\n\t")])],1)}),[],!1,null,"14fc9ab2",null).exports,Gt={name:"Navigation",components:{AppNavigation:o.yS,AppNavigationSettings:o.AR,AppNavigationSpacer:o.NI,AppSettingsMenu:jt,NavigationAccount:I,NavigationAccountExpandCollapse:R,NavigationMailbox:ft,NavigationOutbox:wt,NewMessageButtonHeader:n.Z,IconSetting:b.default},data:()=>({refreshing:!1}),computed:{menu(){return this.$store.getters.accounts.filter((t=>t.id!==ot.y9)).map((t=>{const e=this.$store.getters.getMailboxes(t.id),a=e.filter((e=>this.isCollapsed(t,e))).length>1;return{id:t.id,account:t,mailboxes:e,isCollapsible:a}}))},unifiedAccount(){return this.$store.getters.getAccount(ot.y9)},unifiedMailboxes(){return this.$store.getters.getMailboxes(ot.y9)},passwordIsUnavailable(){return this.$store.getters.getPreference("password-is-unavailable",!1)},outboxMessages(){return this.$store.getters["outbox/getAllMessages"]}},methods:{isCollapsed:(t,e)=>"inbox"!==e.specialRole&&e.databaseId!==t.draftsMailboxId&&e.databaseId!==t.sentMailboxId&&e.databaseId!==t.trashMailboxId,isFirst(t){return t===this.$store.getters.accounts[1]},isLast(t){const e=this.$store.getters.accounts;return t===e[e.length-1]},isDisabled(t){return this.passwordIsUnavailable&&!!t.provisioningId&&!!this.$store.getters.masterPasswordEnabled}}};var Ht=i(16921),Jt={};Jt.styleTagTransform=$(),Jt.setAttributes=E(),Jt.insert=D().bind(null,"head"),Jt.domAPI=B(),Jt.insertStyleElement=N(),S()(Ht.Z,Jt),Ht.Z&&Ht.Z.locals&&Ht.Z.locals;const Wt=(0,y.Z)(Gt,(function(){var t=this,e=t._self._c;return e("AppNavigation",{scopedSlots:t._u([{key:"list",fn:function(){return[t._l(t.unifiedMailboxes,(function(a){return e("NavigationMailbox",{key:"mailbox-"+a.databaseId,attrs:{account:t.unifiedAccount,mailbox:a}})})),t._v(" "),e("AppNavigationSpacer"),t._v(" "),t._l(t.menu,(function(a){return[a.account?e("NavigationAccount",{key:a.account.id,attrs:{account:a.account,"first-mailbox":a.mailboxes[0],"is-first":t.isFirst(a.account),"is-last":t.isLast(a.account),"is-disabled":t.isDisabled(a.account)}}):t._e(),t._v(" "),t.isDisabled(a.account)?t._e():[t._l(a.mailboxes,(function(i){return[e("NavigationMailbox",{directives:[{name:"show",rawName:"v-show",value:!a.isCollapsible||!a.account.collapsed||!t.isCollapsed(a.account,i),expression:"\n\t\t\t\t\t\t\t!group.isCollapsible ||\n\t\t\t\t\t\t\t\t!group.account.collapsed ||\n\t\t\t\t\t\t\t\t!isCollapsed(group.account, item)\n\t\t\t\t\t\t"}],key:"mailbox-"+i.databaseId,attrs:{account:a.account,mailbox:i}}),t._v(" "),a.account.isUnified||"inbox"!==i.specialRole?t._e():e("NavigationMailbox",{key:i.databaseId+"-starred",attrs:{account:a.account,mailbox:i,filter:"starred"}})]})),t._v(" "),!a.account.isUnified&&a.isCollapsible?e("NavigationAccountExpandCollapse",{key:"collapse-"+a.account.id,attrs:{account:a.account}}):t._e(),t._v(" "),e("AppNavigationSpacer",{key:"spacer-"+a.account.id})]]}))]},proxy:!0},{key:"footer",fn:function(){return[0!==t.outboxMessages.length?e("div",{staticClass:"outbox__border"},[e("NavigationOutbox",{staticClass:"outbox"})],1):t._e(),t._v(" "),e("AppNavigationSettings",{attrs:{title:t.t("mail","Mail settings")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconSetting",{attrs:{size:20}})]},proxy:!0}])},[t._v(" "),e("AppSettingsMenu")],1)]},proxy:!0}])},[e("NewMessageButtonHeader")],1)}),[],!1,null,"cfbd4ee8",null).exports},49944:(t,e,a)=>{"use strict";a.d(e,{Z:()=>I});var i=a(15961),o=a(99270),n=a(65517),s=a(64192),r=a.n(s),l=a(89177);const c={name:"NewMessageButtonHeader",components:{Button:i.P2,IconAdd:o.Z,IconRefresh:n.Z,IconLoading:r()},data:()=>({refreshing:!1}),computed:{currentMailbox(){if("message"===this.$route.name||"mailbox"===this.$route.name)return this.$store.getters.getMailbox(this.$route.params.mailboxId)}},methods:{async refreshMailbox(){if(!0!==this.refreshing){this.refreshing=!0;try{await this.$store.dispatch("syncEnvelopes",{mailboxId:this.currentMailbox.databaseId}),l.Z.debug("Current mailbox is sync'ing ")}catch(t){l.Z.error("could not sync current mailbox",{error:t})}finally{this.refreshing=!1}}else l.Z.debug("already sync'ing mailbox.. aborting")},async onNewMessage(){await this.$store.dispatch("startComposerSession",{isBlankMessage:!0})}}};var d=a(93379),u=a.n(d),p=a(7795),m=a.n(p),A=a(90569),b=a.n(A),h=a(3565),g=a.n(h),x=a(19216),v=a.n(x),f=a(44589),C=a.n(f),_=a(49826),y={};y.styleTagTransform=C(),y.setAttributes=g(),y.insert=b().bind(null,"head"),y.domAPI=m(),y.insertStyleElement=v(),u()(_.Z,y),_.Z&&_.Z.locals&&_.Z.locals;const I=(0,a(51900).Z)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("Button",{staticClass:"new-message-button",attrs:{"aria-label":t.t("mail","New message"),type:"primary","button-id":"mail_new_message",role:"complementary",wide:!0},on:{click:t.onNewMessage},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","New message"))+"\n\t")]),t._v(" "),t.currentMailbox?e("Button",{staticClass:"refresh__button",attrs:{"aria-label":t.t("mail","Refresh"),type:"tertiary-no-background",disabled:t.refreshing},on:{click:t.refreshMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[t.refreshing?t._e():e("IconRefresh",{attrs:{size:20}}),t._v(" "),t.refreshing?e("IconLoading",{attrs:{size:20}}):t._e()]},proxy:!0}],null,!1,2669673868)}):t._e()],1)}),[],!1,null,"680c6c25",null).exports},99893:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const i={name:"ImportantIcon",props:{title:{type:String,default:""},size:{type:Number,default:20},fillColor:{type:String,default:"currentColor"}}},o=(0,a(51900).Z)(i,(function(t,e){return t("span",e._g(e._b({staticClass:"material-design-icon important-icon",class:[e.data.class,e.data.staticClass],attrs:{"aria-hidden":!e.props.title,"aria-label":e.props.title,role:"img"}},"span",e.data.attrs,!1),e.listeners),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.props.fillColor,width:e.props.size,height:e.props.size,viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),e._v(" "),t("path",{attrs:{d:"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z"}})])])}),[],!0,null,null,null).exports},25819:()=>{}}]);
//# sourceMappingURL=mail.325.a07c66b6cdbe706a5e3b.js.map